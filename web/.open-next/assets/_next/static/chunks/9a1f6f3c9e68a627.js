(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66606,e=>{"use strict";e.i(47167);var t=e.i(43476),i=e.i(71645),s=e.i(18566),a=e.i(59544);let l=new class{ctx=null;gainNode=null;init(){if(!this.ctx){let e=window.AudioContext||window.webkitAudioContext;e&&(this.ctx=new e,this.gainNode=this.ctx.createGain(),this.gainNode.connect(this.ctx.destination))}this.ctx&&"suspended"===this.ctx.state&&this.ctx.resume().then(()=>{}).catch(e=>{console.warn("AudioContext resume failed (waiting for gesture):",e)})}playClick(){if((this.ctx&&"suspended"!==this.ctx.state||(this.init(),this.ctx&&"suspended"!==this.ctx.state))&&this.gainNode)try{let e=this.ctx.createOscillator(),t=this.ctx.createGain();e.connect(t),t.connect(this.gainNode),e.type="square",e.frequency.setValueAtTime(800,this.ctx.currentTime),e.frequency.exponentialRampToValueAtTime(1200,this.ctx.currentTime+.05),t.gain.setValueAtTime(.05,this.ctx.currentTime),t.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+.05),e.start(),e.stop(this.ctx.currentTime+.05)}catch(e){console.error("Audio error:",e)}}playBinauralBurst(){if((this.ctx&&"suspended"!==this.ctx.state||(this.init(),this.ctx&&"suspended"!==this.ctx.state))&&this.gainNode)try{let e=this.ctx.currentTime,t=this.ctx.createOscillator(),i=this.ctx.createStereoPanner(),s=this.ctx.createGain();t.frequency.value=200,i.pan.value=-1,t.connect(s),s.connect(i),i.connect(this.gainNode);let a=this.ctx.createOscillator(),l=this.ctx.createStereoPanner(),n=this.ctx.createGain();a.frequency.value=240,l.pan.value=1,a.connect(n),n.connect(l),l.connect(this.gainNode),s.gain.setValueAtTime(0,e),s.gain.linearRampToValueAtTime(.1,e+.05),s.gain.exponentialRampToValueAtTime(.001,e+.3),n.gain.setValueAtTime(0,e),n.gain.linearRampToValueAtTime(.1,e+.05),n.gain.exponentialRampToValueAtTime(.001,e+.3),t.start(e),t.stop(e+.3),a.start(e),a.stop(e+.3)}catch(e){console.error("Audio error:",e)}}playMilestone(){if((this.ctx&&"suspended"!==this.ctx.state||(this.init(),this.ctx&&"suspended"!==this.ctx.state))&&this.gainNode)try{let e=this.ctx.currentTime;[440,554,659].forEach((t,i)=>{let s=this.ctx.createOscillator(),a=this.ctx.createGain();s.connect(a),a.connect(this.gainNode),s.type="sine",s.frequency.setValueAtTime(t,e+.1*i),a.gain.setValueAtTime(0,e+.1*i),a.gain.linearRampToValueAtTime(.15,e+.1*i+.02),a.gain.exponentialRampToValueAtTime(.001,e+.1*i+.3),s.start(e+.1*i),s.stop(e+.1*i+.3)})}catch(e){console.error("Audio error:",e)}}playWhoosh(){if((this.ctx&&"suspended"!==this.ctx.state||(this.init(),this.ctx&&"suspended"!==this.ctx.state))&&this.gainNode)try{let e=this.ctx.currentTime,t=.2*this.ctx.sampleRate,i=this.ctx.createBuffer(1,t,this.ctx.sampleRate),s=i.getChannelData(0);for(let e=0;e<t;e++)s[e]=2*Math.random()-1;let a=this.ctx.createBufferSource(),l=this.ctx.createBiquadFilter(),n=this.ctx.createGain();a.buffer=i,l.type="bandpass",l.frequency.setValueAtTime(200,e),l.frequency.exponentialRampToValueAtTime(2e3,e+.15),l.Q.value=1,a.connect(l),l.connect(n),n.connect(this.gainNode),n.gain.setValueAtTime(.08,e),n.gain.exponentialRampToValueAtTime(.001,e+.2),a.start(e),a.stop(e+.2)}catch(e){console.error("Audio error:",e)}}playDeepTone(){if((this.ctx&&"suspended"!==this.ctx.state||(this.init(),this.ctx&&"suspended"!==this.ctx.state))&&this.gainNode)try{let e=this.ctx.currentTime,t=this.ctx.createOscillator(),i=this.ctx.createGain();t.connect(i),i.connect(this.gainNode),t.type="sine",t.frequency.setValueAtTime(110,e),i.gain.setValueAtTime(0,e),i.gain.linearRampToValueAtTime(.1,e+.3),i.gain.setValueAtTime(.1,e+.8),i.gain.exponentialRampToValueAtTime(.001,e+1.5),t.start(e),t.stop(e+1.5)}catch(e){console.error("Audio error:",e)}}playTick(){if((this.ctx&&"suspended"!==this.ctx.state||(this.init(),this.ctx&&"suspended"!==this.ctx.state))&&this.gainNode)try{let e=this.ctx.currentTime,t=this.ctx.createOscillator(),i=this.ctx.createGain();t.connect(i),i.connect(this.gainNode),t.type="sine",t.frequency.setValueAtTime(1200,e),t.frequency.exponentialRampToValueAtTime(800,e+.08),i.gain.setValueAtTime(.1,e),i.gain.exponentialRampToValueAtTime(.001,e+.08),t.start(e),t.stop(e+.08)}catch(e){console.error("Audio error:",e)}}playPowerUp(){if((this.ctx&&"suspended"!==this.ctx.state||(this.init(),this.ctx&&"suspended"!==this.ctx.state))&&this.gainNode)try{let e=this.ctx.currentTime,t=this.ctx.createOscillator(),i=this.ctx.createGain();t.connect(i),i.connect(this.gainNode),t.type="square",t.frequency.setValueAtTime(300,e),t.frequency.exponentialRampToValueAtTime(900,e+.15),i.gain.setValueAtTime(.08,e),i.gain.exponentialRampToValueAtTime(.001,e+.2),t.start(e),t.stop(e+.2)}catch(e){console.error("Audio error:",e)}}playPillarComplete(){if((this.ctx&&"suspended"!==this.ctx.state||(this.init(),this.ctx&&"suspended"!==this.ctx.state))&&this.gainNode)try{let e=this.ctx.currentTime,t=this.ctx.createOscillator(),i=this.ctx.createOscillator(),s=this.ctx.createGain(),a=this.ctx.createGain();t.connect(s),i.connect(a),s.connect(this.gainNode),a.connect(this.gainNode),t.type="sine",i.type="sine",t.frequency.setValueAtTime(523,e),i.frequency.setValueAtTime(659,e+.1),s.gain.setValueAtTime(.12,e),s.gain.exponentialRampToValueAtTime(.001,e+.3),a.gain.setValueAtTime(0,e),a.gain.setValueAtTime(.12,e+.1),a.gain.exponentialRampToValueAtTime(.001,e+.4),t.start(e),t.stop(e+.3),i.start(e+.1),i.stop(e+.4)}catch(e){console.error("Audio error:",e)}}};var n=e.i(71558),r=e.i(18453),o=e.i(56158);let c=[{id:1,type:"commentary",lines:["Hey.","It's me.","You.","From the future."]},{id:2,type:"choice",label:"How many times have you tried to change something about yourself?",choices:["1-2","3-5","6-10","I lost count"]},{id:3,type:"commentary",dynamicLines:e=>(function(e){switch(e){case"1-2":return["Just getting started.","Good. Less baggage to carry."];case"3-5":return["A few tries.","Most people stop there. You didn't."];case"6-10":return["You keep coming back.","That's not weakness. That's hunger."];case"I lost count":return["Yeah. I figured.","But you're still here. That says something."];default:return["Interesting.","Let's make this time different."]}})(String(e.change_attempts||""))},{id:4,type:"input",label:"What's your name?",placeholder:"Your name"},{id:5,type:"slider",label:"How old are you?",min:16,max:99},{id:6,type:"choice",label:"Gender?",choices:["Male","Female","Don't specify"]},{id:7,type:"commentary",dynamicLines:e=>{let t=String(e.name||"friend");return[`Good to meet you, ${t}.`,"Life isn't one battle.","It's many.","Pick yours."]}},{id:8,type:"pillar_selection"},{id:9,type:"pillar_primary",label:"Which one matters MOST right now?"},{id:"pillar_questions",type:"pillar_questions"},{id:10,type:"commentary",dynamicLines:e=>{let t=Array.isArray(e.selected_pillars)?e.selected_pillars:[];return[`So you want to fix your ${function(e=[]){if(0===e.length)return"your goals";if(1===e.length)return e[0].replace(/_/g," ");if(2===e.length)return`${e[0].replace(/_/g," ")} and ${e[1].replace(/_/g," ")}`;let t=e[e.length-1].replace(/_/g," "),i=e.slice(0,-1).map(e=>e.replace(/_/g," ")).join(", ");return`${i}, and ${t}`}(t)}.`,"Let's see why it hasn't worked before."]}},{id:11,type:"choice",label:"What usually happens when you try to change?",choices:["I slowly drift away","I crash and burn","I just stop one day","I never really start"]},{id:12,type:"slider",label:"How many times have you tried this exact thing before?",min:0,max:20},{id:13,type:"choice",label:"When do you usually give up?",choices:["Day 1-3","First week","First month","Right before I win"]},{id:14,type:"choice",label:"What's your go-to excuse?",choices:["I'll start tomorrow","Too tired today","Not ready yet","Something came up"]},{id:15,type:"commentary",dynamicLines:e=>{let t=String(e.name||""),i=String(e.quit_pattern||"early"),s=String(e.favorite_excuse||"excuses");return[`You quit at "${i}".`,`Your excuse is always "${s}".`,t?`I see you, ${t}.`:"I see you."]}},{id:16,type:"choice",label:"When you failed before, who did you let down?",choices:["Myself","My family","My partner","Everyone who believed in me"]},{id:17,type:"choice",label:"What scares you more?",choices:["Failing publicly","Actually succeeding","Dying with regret","Staying exactly the same"]},{id:18,type:"input",label:"What's a fear you don't talk about?",placeholder:"Be honest with yourself"},{id:19,type:"input",label:"If nothing changes, where will you be in 5 years?",placeholder:"Paint the dark picture"},{id:20,type:"voice",label:"Now say it out loud.",subtext:"What happens if you don't change? Be brutally honest. This is for you."},{id:21,type:"input",label:"Complete this: I am becoming...",placeholder:"I am becoming..."},{id:22,type:"commentary",dynamicLines:e=>{let t=String(e.core_identity||"someone new");return[`"${t}"`,"That's who you're becoming.","Now tell me why."]}},{id:23,type:"voice",label:"Why does this matter to you?",subtext:"Speak from your heart. I'm listening."},{id:24,type:"time",label:"What time should I check in with you?"},{id:25,type:"choice",label:"Can I interrupt your day to hold you accountable?",choices:["Yes, hold me accountable","No, I'll check in myself"]},{id:26,type:"slider",label:"How many strikes before I get ruthless?",min:1,max:5},{id:27,type:"slider",label:"Right now, how much do you believe you can do this?",min:1,max:10},{id:28,type:"commentary",dynamicLines:e=>{let t=e.belief_score||5,i=String(e.name||"");var s=Number(t);return s<=3?[`${i}, your belief is at ${s}.`,"That's brutally honest.","Belief grows with action. One day at a time."]:s<=5?[`Belief at ${s}.`,"Not fully sold on yourself yet.","That's okay. We'll build it together."]:s<=7?[`${s} out of 10.`,"You see a path.","Now let's walk it."]:[`Belief at ${s}. Strong.`,"Now prove it wasn't just talk."]}},{id:29,type:"voice",label:"Make your pledge.",subtext:"Promise yourself. Out loud. I'm recording this."},{id:30,type:"card",label:"Your Commitment"},{id:31,type:"auth",label:"Lock it in"}],d={2:"change_attempts",4:"name",5:"age",6:"gender",8:"selected_pillars",9:"primary_pillar",11:"failure_pattern",12:"previous_attempts",13:"quit_pattern",14:"favorite_excuse",16:"who_disappointed",17:"primary_fear",18:"hidden_fear",19:"dark_future",20:"future_self_intro_recording",21:"core_identity",23:"why_recording",24:"call_time",25:"allow_interruptions",26:"strikes_allowed",27:"belief_score",29:"pledge_recording"};function m(e){return d[e]||String(e)}var u=e.i(21335);let x=({text:e,onComplete:s,speed:a=30,startDelay:n=0,className:r})=>{let[o,c]=(0,i.useState)(0),[d,m]=(0,i.useState)(!1),u=(0,i.useRef)(0),x=(0,i.useRef)(s),h=(0,i.useRef)(e);return((0,i.useEffect)(()=>{x.current=s},[s]),(0,i.useEffect)(()=>{m(!0)},[]),(0,i.useEffect)(()=>{if(!d)return;e!==h.current&&(h.current=e,c(0));let t=setTimeout(()=>{let t=0,i=setInterval(()=>{c(++t);let s=Date.now();t%2==0&&s-u.current>50&&(l.playClick(),u.current=s),t>=e.length&&(clearInterval(i),setTimeout(()=>{x.current?.()},100))},a);return()=>clearInterval(i)},n);return()=>clearTimeout(t)},[e,a,n,d]),d)?(0,t.jsxs)("span",{className:r||"font-mono text-[#FAFAFA] text-xl md:text-2xl leading-relaxed font-medium",children:[e.substring(0,o),(0,t.jsx)("span",{className:"animate-pulse inline-block w-2 h-5 bg-[#F97316] ml-1 align-middle"})]}):(0,t.jsx)("span",{className:r||"font-mono text-[#FAFAFA] text-xl md:text-2xl leading-relaxed font-medium",children:(0,t.jsx)("span",{className:"animate-pulse inline-block w-2 h-5 bg-[#F97316] ml-1 align-middle"})})};var h=e.i(65580);let p=({lines:e,onNext:s,showMascot:a=!0})=>{let[l,n]=(0,i.useState)(0),[r,o]=(0,i.useState)([]),[c,d]=(0,i.useState)(!0),m=(0,i.useRef)(s),u=(0,i.useRef)(!1);(0,i.useEffect)(()=>{m.current=s},[s]),(0,i.useEffect)(()=>{n(0),o([]),d(!0),u.current=!1},[e]);let p=()=>{d(!1),o(e=>[...e,l]),l<e.length-1?setTimeout(()=>{n(e=>e+1),d(!0)},800):setTimeout(()=>{u.current||(u.current=!0,m.current())},2e3)};return(0,t.jsxs)("div",{className:"w-full max-w-2xl min-h-[300px] flex flex-col justify-center",children:[a&&(0,t.jsx)("div",{className:"flex justify-center mb-8 md:mb-12",children:(0,t.jsx)(h.OnboardingMascot,{expression:"speaking",size:"lg",speaking:c,animate:!0})}),(0,t.jsx)("div",{className:"space-y-8 text-left",children:e.map((e,i)=>{if(i>l)return null;let s=r.includes(i),a=i===l;return(0,t.jsx)("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-500",children:s?(0,t.jsx)("span",{className:"font-mono text-white/50 text-xl md:text-2xl leading-relaxed font-medium",children:e}):a?(0,t.jsx)(x,{text:e,speed:35,onComplete:p}):null},`${i}-${e.substring(0,20)}`)})})]})},f=({value:e,onChange:s,placeholder:a,onEnter:l,autoFocus:n=!0})=>{let r=(0,i.useRef)(null);return(0,i.useEffect)(()=>{n&&r.current&&setTimeout(()=>r.current?.focus(),100)},[n]),(0,t.jsxs)("div",{className:"w-full max-w-2xl relative group",children:[(0,t.jsx)("input",{ref:r,type:"text",value:e||"",onChange:e=>s(e.target.value),onKeyDown:t=>"Enter"===t.key&&e&&l(),className:"w-full bg-transparent border-b-2 border-white/20 py-6 text-3xl md:text-4xl font-mono font-medium text-[#FAFAFA] placeholder-white/30 focus:outline-none focus:border-[#F97316] transition-all duration-300 text-center",placeholder:a,autoComplete:"off"}),(0,t.jsx)("div",{className:"absolute right-0 bottom-6 opacity-0 group-focus-within:opacity-100 transition-opacity",children:(0,t.jsx)("span",{className:"text-xs font-mono text-white/40",children:"Press Enter"})})]})};var g=e.i(72520);let b=({options:e,onSelect:i,disabled:s=!1})=>(0,t.jsx)("div",{className:"flex flex-col gap-3 w-full max-w-xl animate-in slide-in-from-bottom-8 duration-500",children:e.map((e,a)=>(0,t.jsx)("button",{onClick:()=>{!s&&(l.playTick(),i(e))},disabled:s,className:`group relative w-full text-left px-6 py-5 border transition-all duration-200
            ${s?"bg-white/5 border-white/10 cursor-not-allowed opacity-50":"bg-white/5 border-white/20 hover:bg-[#F97316] hover:border-[#F97316] hover:text-black cursor-pointer"}`,children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:`font-mono text-lg md:text-xl font-medium transition-transform duration-300 text-[#FAFAFA] group-hover:text-black
                ${!s&&"group-hover:translate-x-2"}`,children:e}),(0,t.jsx)(g.ArrowRight,{className:`transition-all duration-300 w-5 h-5 text-[#FAFAFA] group-hover:text-black
                ${s?"opacity-0":"opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0"}`,strokeWidth:2})]})},a))}),w=({value:e=5,onChange:s,min:a=1,max:n=10,label:r})=>{let o=(0,i.useRef)(0);return(0,t.jsxs)("div",{className:"w-full max-w-xl space-y-12 animate-in fade-in duration-700",children:[(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("span",{className:"font-mono text-[#FAFAFA] text-2xl md:text-3xl leading-relaxed font-medium",children:r||"Intensity"})}),(0,t.jsx)("div",{className:"flex justify-center items-end border-b-2 border-white/20 pb-4",children:(0,t.jsx)("span",{className:"font-mono font-bold text-7xl md:text-8xl text-[#F97316] leading-none",children:e})}),(0,t.jsx)("input",{type:"range",min:a,max:n,value:e,onChange:e=>{var t;let i;return t=Number(e.target.value),void((i=Date.now())-o.current>100&&(l.playClick(),o.current=i),s(t))},className:"w-full h-2 bg-white/10 appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-8 [&::-webkit-slider-thumb]:h-8 [&::-webkit-slider-thumb]:bg-[#F97316] hover:[&::-webkit-slider-thumb]:scale-125 transition-all"}),(0,t.jsxs)("div",{className:"flex justify-between font-mono text-xs text-white/40 uppercase tracking-wide",children:[(0,t.jsx)("span",{children:"Low"}),(0,t.jsx)("span",{children:"Extreme"})]})]})};var y=e.i(87951),j=e.i(75254);let v=(0,j.default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),N=["audio/webm","audio/wav","audio/mp3","audio/mpeg","audio/ogg","audio/m4a","audio/mp4"],A=({isRecording:e,onToggle:s,recordingTime:a=0,minDuration:r=15,canStop:o=!0,fieldName:c,onRecordingComplete:d,onRecordingError:m})=>{let u=(0,i.useRef)(null),x=(0,i.useRef)(null),h=(0,i.useRef)(null),p=(0,i.useRef)(null),f=(0,i.useRef)(null),g=(0,i.useRef)([]),b=(0,i.useRef)(null),w=(0,i.useRef)(c),j=(0,i.useRef)(d),A=(0,i.useRef)(m),k=Math.min(a/r*100,100),F=Math.max(r-a,0),T=(0,i.useRef)(k),S=(0,i.useRef)(o);return(0,i.useEffect)(()=>{T.current=k,S.current=o,w.current=c,j.current=d,A.current=m},[k,o,c,d,m]),(0,i.useEffect)(()=>{let t=u.current,i=t?.getContext("2d");return t&&i&&!e&&(i.fillStyle="#0A0A0A",i.fillRect(0,0,t.width,t.height),i.beginPath(),i.moveTo(0,t.height/2),i.lineTo(t.width,t.height/2),i.strokeStyle="rgba(255, 255, 255, 0.2)",i.lineWidth=2,i.stroke()),e?(async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});p.current=e;let s=new(window.AudioContext||window.webkitAudioContext);h.current=s;let a=s.createAnalyser();a.fftSize=2048,b.current=a,s.createMediaStreamSource(e).connect(a);let l=new MediaRecorder(e);f.current=l,g.current=[],l.ondataavailable=e=>{e.data.size>0&&g.current.push(e.data)},l.onstop=()=>{let e=new Blob(g.current,{type:"audio/webm"});if(e.size<10240){let t=`Recording too short (${Math.round(e.size/1024)}KB). Please record for longer.`;console.error("[VoiceVisualizer]",t),A.current&&A.current(t);return}if(e.size>0xa00000){let t=`Recording too large (${Math.round(e.size/1048576)}MB). Maximum is 10MB.`;console.error("[VoiceVisualizer]",t),A.current&&A.current(t);return}if(!N.includes(e.type)){let t=`Invalid audio format: ${e.type}`;console.error("[VoiceVisualizer]",t),A.current&&A.current(t);return}let t=w.current||`recording_${Date.now()}`;n.storageService.saveVoice(e,t),j.current&&j.current(e)},l.start();let r=a.frequencyBinCount,o=new Uint8Array(r),c=()=>{if(!t||!i)return;x.current=requestAnimationFrame(c),a.getByteTimeDomainData(o),i.fillStyle="#0A0A0A",i.fillRect(0,0,t.width,t.height);let e=T.current/100*t.width;T.current<100?(i.fillStyle="rgba(249, 115, 22, 0.15)",i.fillRect(0,0,e,t.height)):(i.fillStyle="rgba(34, 197, 94, 0.15)",i.fillRect(0,0,t.width,t.height));let s=t.width/r;i.lineWidth=3,i.beginPath();for(let a=0;a<r;a++){let l=o[a]/128*t.height/2,n=a*s;n<=e&&(0===a||a>0&&(a-1)*s>e?i.moveTo(n,l):i.lineTo(n,l))}i.strokeStyle=S.current?"#22c55e":"#F97316",i.stroke(),i.beginPath();let l=!1;for(let a=0;a<r;a++){let n=o[a]/128*t.height/2,r=a*s;r>=e&&(l?i.lineTo(r,n):(i.moveTo(r,n),l=!0))}i.strokeStyle="rgba(255, 255, 255, 0.3)",i.stroke(),T.current<100&&(i.beginPath(),i.moveTo(e,0),i.lineTo(e,t.height),i.strokeStyle="#F97316",i.lineWidth=2,i.setLineDash([4,4]),i.stroke(),i.setLineDash([]))};c()}catch(e){console.error("Microphone access denied or error:",e)}})():(f.current&&"inactive"!==f.current.state&&f.current.stop(),x.current&&cancelAnimationFrame(x.current),h.current&&h.current.close(),p.current&&p.current.getTracks().forEach(e=>e.stop())),()=>{x.current&&cancelAnimationFrame(x.current),h.current&&h.current.close(),p.current&&p.current.getTracks().forEach(e=>e.stop())}},[e]),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-10 animate-in fade-in duration-1000 w-full max-w-md",children:[(0,t.jsxs)("div",{className:"w-full bg-[#0A0A0A] border-2 border-white/20 relative overflow-hidden",children:[(0,t.jsxs)("div",{className:"absolute top-3 left-3 flex gap-1.5 z-10",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-white/20"}),(0,t.jsx)("div",{className:"w-2 h-2 bg-white/20"}),(0,t.jsx)("div",{className:"w-2 h-2 bg-white/20"})]}),(0,t.jsx)("canvas",{ref:u,width:600,height:200,className:"w-full h-48"}),e&&(0,t.jsxs)("div",{className:"absolute top-4 right-4 flex items-center gap-2 z-10",children:[(0,t.jsx)("div",{className:`w-3 h-3 animate-pulse ${o?"bg-green-500":"bg-[#F97316]"}`}),(0,t.jsx)("span",{className:`font-mono text-sm font-bold tracking-wider ${o?"text-green-500":"text-[#F97316]"}`,children:o?"READY":`${F}s`})]})]}),(0,t.jsx)("button",{onClick:()=>{e?o&&l.playMilestone():l.playDeepTone(),s()},disabled:e&&!o,className:`group relative flex items-center justify-center w-24 h-24 border-2 transition-all duration-300 
                    ${e?o?"border-[#22c55e] bg-[#22c55e] text-black scale-110 cursor-pointer":"border-[#F97316] bg-transparent text-[#F97316] scale-105 cursor-not-allowed":"border-white/30 text-white/70 hover:bg-[#F97316] hover:border-[#F97316] hover:text-black cursor-pointer"}`,children:e?(0,t.jsx)(v,{fill:"currentColor",size:32}):(0,t.jsx)(y.Mic,{size:36,strokeWidth:2})}),(0,t.jsx)("p",{className:"font-mono text-xs text-white/40 uppercase tracking-[0.2em] font-bold",children:e?o?"Tap to Stop":"Keep Going...":"Tap to Record"})]})};var k=e.i(43531),F=e.i(98919),T=e.i(24279);let S=({data:e,onAccept:s})=>{let n,r,[o,c]=(0,i.useState)(!1),d=e=>{let t=(0,T.getPillarById)(e);return t||(e.startsWith("custom_")?(0,T.createCustomPillar)(e):{icon:"ðŸŽ¯",label:e.replace(/_/g," ")})},m=e.name||e[4]||"You",u=e.core_identity||e[21]||"Someone who shows up",x=e.check_in_time||e[24]||"21:00",h=Array.isArray(e.selected_pillars)?e.selected_pillars:Array.isArray(e[8])?e[8]:[],p=e.primary_pillar||e[9]||h[0],f=e.quit_pattern||e[13]||"",g=e.favorite_excuse||e[14]||"",b=e.belief_score||e[27]||5,w=e.strikes_allowed||e[26]||3;return(0,t.jsxs)("div",{className:"w-full max-w-lg animate-in fade-in slide-in-from-bottom-4 duration-700",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 border-2 border-[#F97316] mb-6",children:(0,t.jsx)(F.Shield,{size:28,className:"text-[#F97316]"})}),(0,t.jsx)("h2",{className:"font-mono text-[#FAFAFA] text-2xl md:text-3xl font-medium mb-2",children:"Your Commitment"}),(0,t.jsx)("p",{className:"font-mono text-white/40 text-sm",children:"This is a binding agreement with yourself."})]}),(0,t.jsxs)("div",{className:"border-2 border-[#F97316] p-6 mb-6 text-center",children:[(0,t.jsx)("p",{className:"font-mono text-white/50 text-xs mb-2 uppercase tracking-wide",children:"I am becoming"}),(0,t.jsxs)("p",{className:"font-mono text-[#FAFAFA] text-xl md:text-2xl font-bold",children:["â€œ",u,"â€"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"bg-white/5 border border-white/10 p-4",children:[(0,t.jsx)("p",{className:"font-mono text-white/40 text-xs mb-1 uppercase tracking-wide",children:"Name"}),(0,t.jsx)("p",{className:"font-mono text-[#FAFAFA] font-medium",children:m})]}),(0,t.jsxs)("div",{className:"bg-white/5 border border-white/10 p-4",children:[(0,t.jsx)("p",{className:"font-mono text-white/40 text-xs mb-1 uppercase tracking-wide",children:"Check-in"}),(0,t.jsx)("p",{className:"font-mono text-[#FAFAFA] font-medium",children:x})]}),(0,t.jsxs)("div",{className:"bg-white/5 border border-white/10 p-4",children:[(0,t.jsx)("p",{className:"font-mono text-white/40 text-xs mb-1 uppercase tracking-wide",children:"Belief"}),(0,t.jsxs)("p",{className:"font-mono text-[#FAFAFA] font-medium",children:[b,"/10"]})]}),(0,t.jsxs)("div",{className:"bg-white/5 border border-white/10 p-4",children:[(0,t.jsx)("p",{className:"font-mono text-white/40 text-xs mb-1 uppercase tracking-wide",children:"Strikes"}),(0,t.jsxs)("p",{className:"font-mono text-[#FAFAFA] font-medium",children:[w," allowed"]})]})]}),p&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("p",{className:"font-mono text-white/40 text-xs mb-3 uppercase tracking-wide",children:"Primary Focus"}),(0,t.jsx)("div",{className:"border border-[#F97316] p-4",children:(n=d(p),r=e[`${p}_identity_statement`]||"",(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:n.icon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-mono text-[#F97316] font-bold",children:n.label}),r&&(0,t.jsxs)("p",{className:"font-mono text-white/60 text-sm",children:["â€œ",r,"â€"]})]})]}))})]}),h.length>1&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("p",{className:"font-mono text-white/40 text-xs mb-3 uppercase tracking-wide",children:"Also Working On"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:h.filter(e=>e!==p).map(e=>{let i=d(e);return(0,t.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-white/5 text-white/70 border border-white/10 font-mono text-sm",children:[(0,t.jsx)("span",{children:i.icon}),(0,t.jsx)("span",{children:i.label})]},e)})})]}),(f||g)&&(0,t.jsxs)("div",{className:"bg-white/5 border border-white/10 p-4 mb-6",children:[(0,t.jsx)("p",{className:"font-mono text-white/40 text-xs mb-3 uppercase tracking-wide",children:"I Know My Patterns"}),(0,t.jsxs)("div",{className:"space-y-2",children:[f&&(0,t.jsxs)("p",{className:"font-mono text-white/60 text-sm",children:[(0,t.jsx)("span",{className:"text-white/40",children:"I quit at:"})," ",(0,t.jsx)("span",{className:"text-[#F97316]",children:f})]}),g&&(0,t.jsxs)("p",{className:"font-mono text-white/60 text-sm",children:[(0,t.jsx)("span",{className:"text-white/40",children:"My excuse:"})," ",(0,t.jsxs)("span",{className:"text-[#F97316]",children:["â€œ",g,"â€"]})]})]})]}),(0,t.jsxs)("div",{className:"border-2 border-white/20 p-5 mb-6 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,t.jsx)(k.Check,{size:10,className:"text-[#F97316]"})}),(0,t.jsx)("p",{className:"font-mono text-white/70 text-sm",children:"I will show up every single day."})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,t.jsx)(k.Check,{size:10,className:"text-[#F97316]"})}),(0,t.jsx)("p",{className:"font-mono text-white/70 text-sm",children:"I will be radically honest with myself."})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,t.jsx)(k.Check,{size:10,className:"text-[#F97316]"})}),(0,t.jsx)("p",{className:"font-mono text-white/70 text-sm",children:"I will not negotiate with my weaker self."})]})]}),(0,t.jsxs)("label",{className:"flex items-start gap-4 p-5 border-2 border-white/10 cursor-pointer hover:border-[#F97316] transition-colors mb-6",children:[(0,t.jsx)("input",{type:"checkbox",checked:o,onChange:e=>{var t;(t=e.target.checked)&&l.playTick(),c(t)},className:"w-5 h-5 mt-0.5 accent-[#F97316] cursor-pointer"}),(0,t.jsx)("span",{className:"font-mono text-[#FAFAFA] text-sm leading-relaxed",children:"I understand this is a commitment to myself. I am ready to be held accountable."})]}),(0,t.jsx)(a.Button,{size:"lg",variant:"accent",className:`w-full transition-all duration-300 ${!o?"opacity-50 cursor-not-allowed":""}`,onClick:()=>{o&&(l.playMilestone(),s())},disabled:!o,children:"I Accept This Commitment"}),(0,t.jsx)("p",{className:"font-mono text-white/30 text-xs text-center mt-4",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})},_=(0,j.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var C=e.i(37727);let M={body:"ðŸ’ª Body",mind:"ðŸ§  Mind",money:"ðŸ’° Money",game:"ðŸŽ¯ Game",lifestyle:"âš¡ Lifestyle"},R=({selected:e,onSelect:s,onContinue:a})=>{let[n,r]=(0,i.useState)(""),[o,c]=(0,i.useState)(!1),[d,m]=(0,i.useState)(null),u=t=>{e.includes(t)?(l.playClick(),s(e.filter(e=>e!==t))):e.length<T.MAX_PILLARS&&(l.playTick(),s([...e,t]))},x=()=>{n.trim()&&e.length<T.MAX_PILLARS&&(l.playTick(),s([...e,`custom_${n.toLowerCase().replace(/\s+/g,"_")}`]),r(""),c(!1))},h=e.length>=T.MIN_PILLARS,p=(0,T.getCategories)(),f=d?(0,T.getPillarsByCategory)(d):T.PILLAR_PRESETS;return(0,t.jsxs)("div",{className:"w-full max-w-3xl mx-auto animate-in slide-in-from-bottom-8 duration-500",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h2",{className:"font-mono text-2xl md:text-3xl font-bold mb-2 text-white",children:"What are you fixing?"}),(0,t.jsxs)("p",{className:"font-mono text-white/50 text-sm",children:["Pick ",T.MIN_PILLARS,"-",T.MAX_PILLARS," areas. Be honest."]})]}),(0,t.jsx)("div",{className:"flex justify-center mb-4",children:(0,t.jsx)("div",{className:"flex gap-1",children:Array.from({length:T.MAX_PILLARS}).map((i,s)=>(0,t.jsx)("div",{className:`w-3 h-3 transition-all duration-300 ${s<e.length?"bg-[#F97316] scale-110":"bg-white/20"}`},s))})}),(0,t.jsxs)("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:[(0,t.jsx)("button",{onClick:()=>m(null),className:`px-3 py-1.5 font-mono text-xs uppercase tracking-wider transition-all
            ${!d?"bg-[#F97316] text-black font-bold":"bg-white/10 text-white/60 hover:text-white"}`,children:"All"}),p.map(e=>(0,t.jsx)("button",{onClick:()=>m(e),className:`px-3 py-1.5 font-mono text-xs uppercase tracking-wider transition-all
              ${d===e?"bg-[#F97316] text-black font-bold":"bg-white/10 text-white/60 hover:text-white"}`,children:M[e]},e))]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 mb-6 max-h-[45vh] overflow-y-auto pr-1",children:[f.map(i=>{let s=e.includes(i.id),a=!s&&e.length>=T.MAX_PILLARS;return(0,t.jsxs)("button",{onClick:()=>u(i.id),disabled:a,className:`relative p-3 border-2 transition-all duration-200 text-left
                ${s?"border-[#F97316] bg-white/10 text-white":a?"border-white/5 bg-white/5 opacity-40 cursor-not-allowed":"border-white/10 bg-white/5 hover:border-[#F97316] cursor-pointer"}`,children:[s&&(0,t.jsx)("div",{className:"absolute top-2 right-2 text-[#F97316]",children:(0,t.jsx)(k.Check,{className:"w-4 h-4",strokeWidth:3})}),(0,t.jsx)("div",{className:"text-xl mb-1",children:i.icon}),(0,t.jsx)("div",{className:"font-mono font-semibold text-sm text-white",children:i.label}),(0,t.jsx)("div",{className:`font-mono text-[10px] mt-0.5 leading-tight line-clamp-2 ${s?"text-white/70":"text-white/40"}`,children:i.description})]},i.id)}),!d&&!o&&(0,t.jsxs)("button",{onClick:()=>c(!0),disabled:e.length>=T.MAX_PILLARS,className:`p-3 border-2 border-dashed transition-all duration-200 text-left
              ${e.length>=T.MAX_PILLARS?"border-white/5 bg-white/5 opacity-40 cursor-not-allowed":"border-white/20 bg-white/5 hover:border-[#F97316] cursor-pointer"}`,children:[(0,t.jsx)(_,{className:"w-5 h-5 text-white/40 mb-1"}),(0,t.jsx)("div",{className:"font-mono font-semibold text-sm text-white/60",children:"Custom"}),(0,t.jsx)("div",{className:"font-mono text-[10px] mt-0.5 text-white/30",children:"Something else?"})]}),!d&&o&&(0,t.jsxs)("div",{className:"p-3 border-2 border-[#F97316] bg-white/5",children:[(0,t.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value),placeholder:"e.g., Quitting Weed",autoFocus:!0,className:"w-full font-mono text-sm border-b border-white/20 pb-2 mb-2 focus:outline-none focus:border-[#F97316] bg-transparent text-white placeholder-white/30",onKeyDown:e=>{"Enter"===e.key&&x(),"Escape"===e.key&&c(!1)}}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:x,disabled:!n.trim(),className:"flex-1 py-1 px-2 bg-[#F97316] text-black text-xs font-mono font-bold uppercase disabled:opacity-50",children:"Add"}),(0,t.jsx)("button",{onClick:()=>c(!1),className:"py-1 px-2 text-white/50 hover:text-white",children:(0,t.jsx)(C.X,{className:"w-4 h-4"})})]})]})]}),e.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 justify-center mb-6",children:e.map(e=>{let i=T.PILLAR_PRESETS.find(t=>t.id===e),s=i?.label||e.replace("custom_","").replace(/_/g," "),a=i?.icon||"ðŸŽ¯";return(0,t.jsxs)("button",{onClick:()=>u(e),className:"flex items-center gap-1 px-2 py-1 bg-white/10 text-[#F97316] border border-[#F97316] font-mono text-xs hover:bg-white/20 transition-colors",children:[(0,t.jsx)("span",{children:a}),(0,t.jsx)("span",{children:s}),(0,t.jsx)(C.X,{className:"w-3 h-3 ml-0.5"})]},e)})}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("button",{onClick:()=>{l.playPillarComplete(),a()},disabled:!h,className:`px-8 py-4 font-mono font-bold text-lg uppercase tracking-wide transition-all duration-300
            ${h?"bg-[#F97316] text-black hover:bg-[#FB923C] cursor-pointer":"bg-white/10 text-white/40 cursor-not-allowed"}`,children:h?`Lock in ${e.length} ${1===e.length?"pillar":"pillars"}`:`Pick at least ${T.MIN_PILLARS}`})})]})},I=({selectedPillars:e,onSelect:i})=>{let s=e.map(e=>{let t=(0,T.getPillarById)(e);return t||(e.startsWith("custom_")?(0,T.createCustomPillar)(e):{id:e,label:e.replace(/_/g," "),icon:"ðŸŽ¯",description:"",category:"lifestyle",currentStateOptions:[],goalPrompt:"",futurePrompt:""})});return(0,t.jsxs)("div",{className:"w-full max-w-2xl mx-auto animate-in slide-in-from-bottom-8 duration-500",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("h2",{className:"font-mono text-2xl md:text-3xl font-bold mb-4 text-white",children:"Which one matters MOST right now?"}),(0,t.jsx)("p",{className:"font-mono text-white/50",children:"Pick the one you'd fix first if you could only pick one"})]}),(0,t.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void(l.playMilestone(),i(t))},className:"w-full p-6 border-2 border-white/10 bg-white/5  hover:border-white/30 hover:bg-white/10  transition-all duration-200 text-left group",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"text-3xl group-hover:scale-110 transition-transform",children:e.icon}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-mono font-bold text-lg text-white group-hover:text-[#F97316] transition-colors",children:e.label}),e.description&&(0,t.jsx)("div",{className:"font-mono text-sm text-white/40 mt-1",children:e.description})]}),(0,t.jsx)("div",{className:"text-white/20 group-hover:text-[#F97316] group-hover:translate-x-1 transition-all",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M5 12h14"}),(0,t.jsx)("path",{d:"m12 5 7 7-7 7"})]})})]})},e.id))}),(0,t.jsxs)("p",{className:"text-center text-xs text-white/30 mt-8 font-mono",children:["Don't worry, you'll work on all ",e.length,". This just sets your main focus."]})]})},P={1:["First one down. You're just getting started.","Good. One pillar locked.","That's one. Keep moving."],2:["Two pillars deep. Finding your rhythm.","Momentum building.","Halfway there. Don't slow down."],3:["Three locked in. You're on fire.","The vision's getting clearer.","This is where most people quit. Not you."],4:["Four pillars. You're built different.","Almost there. One more.","Final stretch incoming."],5:["All five. Legendary.","Complete domination.","You just defined your entire future."]},L={2:{title:"ðŸ”¥ MOMENTUM",subtitle:"You're not like the others who quit after one.",duration:2e3},3:{title:"âš¡ HALFWAY",subtitle:"Most people never get this clear on what they want.",duration:2200},5:{title:"ðŸ† LOCKED IN",subtitle:"Your future self just became real.",duration:2500}},$=[{text:"The gap between who you are and who you want to be is closed by what you do daily.",duration:3e3},{text:"You're not just answering questions. You're programming your subconscious.",duration:3e3},{text:"Most people spend more time planning vacations than planning their lives. Not you.",duration:3e3},{text:"Clarity is power. You're getting clearer with every answer.",duration:2500}],E=["You're moving fast. Good.","No hesitation. I like it.","Quick decisions. Strong mind."],B=[{title:"Real talk - where you at?",subtitle:"No judgment. Just facts."},{title:"Be honest with yourself.",subtitle:"The truth is the only way forward."},{title:"Let's see where you're starting.",subtitle:"Every journey has a beginning."},{title:"Time for some truth.",subtitle:"You can't fix what you don't acknowledge."}],V=[{title:"Close your eyes. See it.",subtitle:"What does winning look like?"},{title:"Picture your best self.",subtitle:"Be specific. Make it real."},{title:"Fast forward 1 year.",subtitle:"What do you see?"},{title:"Visualize the transformation.",subtitle:"Details matter."}],q=[{title:"Say it like you mean it:",subtitle:'"I am..."'},{title:"Claim your new identity:",subtitle:'"I am..."'},{title:"Speak it into existence:",subtitle:'"I am..."'},{title:"Who are you becoming?",subtitle:'"I am..."'}],z={0:["Brutal honesty. Respect.","Rock bottom is a foundation.","At least you're not lying to yourself."],1:["Been there.","The cycle ends now.","Awareness is step one."],2:["Not bad. But not where you want to be.","Room to grow.","Let's fix that."],3:["Solid foundation.","Time to go from good to great.","Let's optimize."]};function O(e){let t=(0,T.getPillarById)(e);if(t)return t;if(e.startsWith("custom_"))return(0,T.createCustomPillar)(e);let i=e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase());return{id:e,label:i,icon:"ðŸŽ¯",description:"Your focus area",category:"lifestyle",currentStateOptions:T.GENERIC_CURRENT_STATE_OPTIONS,goalPrompt:`Where do you want to be with ${i.toLowerCase()}?`,futurePrompt:`When you've mastered ${i.toLowerCase()}, what does it look like?`}}let W=({selectedPillars:e,data:s,onUpdate:n,onComplete:r})=>{let o,[c,d]=(0,i.useState)(0),[m,u]=(0,i.useState)("current"),[x,p]=(0,i.useState)(!1),[f,g]=(0,i.useState)(!1),[b,w]=(0,i.useState)(""),[y,j]=(0,i.useState)(""),[v,N]=(0,i.useState)(!1),[A,k]=(0,i.useState)(null),[F,S]=(0,i.useState)(!1),[_,C]=(0,i.useState)(null),[M,R]=(0,i.useState)(0),[I]=(0,i.useState)(Date.now()),[W,D]=(0,i.useState)(!1),[Y,G]=(0,i.useState)(""),[H,U]=(0,i.useState)(!1),[K,X]=(0,i.useState)(""),Q=e[c],J=(0,i.useMemo)(()=>Q?O(Q):null,[Q]),Z=["current","goal","future"],ee=e.length,et=J?(o=J.id,`${o}_${m}`):"",ei=s[et]||"",[es,ea]=(0,i.useState)(!0);(0,i.useEffect)(()=>{if("current"===m){ea(!0),l.playWhoosh();let e=setTimeout(()=>ea(!1),1500);return()=>clearTimeout(e)}},[c,m]);let el=t=>{if(x)return;p(!0),R(e=>e+1),n({...s,[et]:t});let i=(Date.now()-I)/(M+1)<8e3&&M>2;setTimeout(()=>{let t=Z.indexOf(m);if(t<Z.length-1)u(Z[t+1]),p(!1);else if(c<e.length-1){let e=c+1,t=L[e];t?(C(t),S(!0),l.playMilestone(),setTimeout(()=>{S(!1),i&&2===e?(G(E[Math.floor(Math.random()*E.length)]),D(!0),l.playPowerUp(),setTimeout(()=>{D(!1),en(e)},1500)):en(e)},t.duration)):en(e)}else{let t=L[e.length];t?(C(t),S(!0),l.playMilestone(),setTimeout(()=>{S(!1),r()},t.duration)):r()}},300)},en=t=>{if((1===t||4===t)&&e.length>2){let e=$[1===t?0:Math.floor(Math.random()*$.length)];X(e.text),U(!0),l.playDeepTone(),setTimeout(()=>{U(!1),er(t)},e.duration)}else er(t)},er=e=>{let t=P[e]||P[1];w(t[Math.floor(Math.random()*t.length)]),g(!0),l.playPillarComplete(),setTimeout(()=>{g(!1),d(c+1),u("current"),p(!1)},1500)};if(!J||!Q)return(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("p",{className:"font-mono text-white/50",children:"No pillars selected."})});if(es&&"current"===m)return(0,t.jsxs)("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center justify-center min-h-[400px] animate-in zoom-in-95 duration-500",children:[(0,t.jsx)("div",{className:"text-6xl mb-4 animate-bounce",children:J.icon}),(0,t.jsx)("h2",{className:"font-mono text-3xl md:text-4xl font-black text-white uppercase tracking-wider",children:J.label}),(0,t.jsxs)("p",{className:"font-mono text-white/40 mt-2",children:[c+1," of ",ee]})]});if(F&&_)return(0,t.jsxs)("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center justify-center min-h-[400px]",children:[(0,t.jsx)("div",{className:"animate-in zoom-in-50 duration-700",children:(0,t.jsx)("h2",{className:"font-mono text-4xl md:text-6xl font-black text-[#F97316] text-center mb-4 animate-pulse",children:_.title})}),(0,t.jsx)("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500 delay-300",children:(0,t.jsx)("p",{className:"font-mono text-lg md:text-xl text-white/80 text-center max-w-md",children:_.subtitle})}),(0,t.jsx)("div",{className:"mt-8 flex gap-2 animate-in fade-in duration-500 delay-500",children:e.map((e,i)=>(0,t.jsx)("div",{className:`w-4 h-4 transition-all duration-500 ${i<=c?"bg-[#F97316] scale-110":"bg-white/20"}`,style:{transitionDelay:`${100*i}ms`}},i))})]});if(W)return(0,t.jsxs)("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center justify-center min-h-[400px] animate-in zoom-in-95 duration-300",children:[(0,t.jsx)("div",{className:"text-5xl mb-4",children:"âš¡"}),(0,t.jsx)("p",{className:"font-mono text-xl text-[#F97316] font-bold text-center",children:Y})]});if(H)return(0,t.jsxs)("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center justify-center min-h-[400px] px-4",children:[(0,t.jsx)("div",{className:"animate-in fade-in duration-700",children:(0,t.jsx)(h.OnboardingMascot,{expression:"serious",size:"md",animate:!1})}),(0,t.jsx)("div",{className:"mt-6 animate-in fade-in slide-in-from-bottom-4 duration-700 delay-300",children:(0,t.jsx)("p",{className:"font-mono text-lg md:text-xl text-white/80 text-center leading-relaxed max-w-lg",children:K})}),(0,t.jsx)("div",{className:"mt-8 animate-in fade-in duration-500 delay-700",children:(0,t.jsx)("div",{className:"w-16 h-0.5 bg-white/20",children:(0,t.jsx)("div",{className:"h-full bg-[#F97316] animate-[grow_3s_ease-in-out]",style:{animation:"grow 3s ease-in-out forwards"}})})})]});if(f){let i=e.slice(0,c+1),s=e[c+1],a=s?O(s):null;return(0,t.jsxs)("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center justify-center min-h-[400px]",children:[(0,t.jsx)("div",{className:"animate-in fade-in duration-300",children:(0,t.jsx)(h.OnboardingMascot,{expression:"proud",size:"lg",animate:!0})}),(0,t.jsx)("p",{className:"font-mono text-xl text-[#F97316] mt-6 font-bold animate-in fade-in slide-in-from-bottom-2 duration-500",children:b}),(0,t.jsx)("div",{className:"flex gap-3 mt-6 animate-in fade-in duration-500 delay-200",children:i.map(e=>{let i=O(e);return(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-[#F97316] flex items-center justify-center text-xl",children:i.icon}),(0,t.jsx)("span",{className:"font-mono text-[10px] text-white/40 mt-1 uppercase",children:"âœ“"})]},e)})}),a&&(0,t.jsxs)("div",{className:"mt-8 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-500",children:[(0,t.jsx)("p",{className:"font-mono text-xs text-white/40 uppercase tracking-widest mb-2",children:"Next up"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2 border border-white/20",children:[(0,t.jsx)("span",{className:"text-2xl",children:a.icon}),(0,t.jsx)("span",{className:"font-mono text-white font-bold",children:a.label})]})]})]})}return v?(0,t.jsxs)("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center justify-center min-h-[400px] animate-in fade-in duration-200",children:[(0,t.jsx)(h.OnboardingMascot,{expression:0===A?"serious":3===A?"proud":"listening",size:"lg",animate:!0}),(0,t.jsx)("p",{className:"font-mono text-xl text-white mt-6 text-center",children:y})]}):(0,t.jsxs)("div",{className:`w-full max-w-2xl mx-auto transition-all duration-300 ${x?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:[M>=3&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4 animate-in fade-in duration-500",children:[(0,t.jsx)("div",{className:"flex gap-0.5",children:[...Array(Math.min(M,9))].map((e,i)=>(0,t.jsx)("div",{className:"w-1.5 h-3 bg-[#F97316] animate-pulse",style:{animationDelay:`${100*i}ms`}},i))}),(0,t.jsx)("span",{className:"font-mono text-xs text-[#F97316] uppercase tracking-widest",children:M>=9?"On Fire":M>=6?"Locked In":"Building Momentum"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-2xl",children:J.icon}),(0,t.jsx)("span",{className:"font-mono text-sm font-bold text-white/60 uppercase",children:J.label})]}),(0,t.jsx)("div",{className:"flex gap-1",children:Z.map((e,i)=>(0,t.jsx)("div",{className:`w-8 h-1 transition-all ${Z.indexOf(m)>=i?"bg-[#F97316]":"bg-white/20"}`},e))})]}),"current"===m&&(0,t.jsxs)("div",{className:"animate-in slide-in-from-right-8 duration-500",children:[(0,t.jsx)("h3",{className:"font-mono text-xl md:text-2xl text-white font-bold mb-2 text-center",children:B[c%B.length].title}),(0,t.jsx)("p",{className:"font-mono text-sm text-white/40 mb-8 text-center",children:B[c%B.length].subtitle}),(0,t.jsx)("div",{className:"space-y-3",children:(J.currentStateOptions||T.GENERIC_CURRENT_STATE_OPTIONS).map((e,i)=>(0,t.jsx)("button",{onClick:()=>((e,t)=>{if(x)return;k(t),l.playBinauralBurst();let i=z[t]||z[1];j(i[Math.floor(Math.random()*i.length)]),N(!0),setTimeout(()=>{N(!1),k(null),el(e)},1200)})(e,i),disabled:x,className:`w-full p-4 border-2 text-left font-mono transition-all duration-200
                  ${0===i?"border-white/10 hover:border-[#F97316] hover:bg-[#F97316] hover:text-black":3===i?"border-white/10 hover:border-[#22c55e] hover:bg-[#22c55e] hover:text-black":"border-white/10 hover:border-[#F97316] hover:bg-[#F97316] hover:text-black"}
                  ${A===i?"border-[#F97316] bg-[#F97316] text-black scale-[1.02]":""}
                `,children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-lg",children:0===i?"ðŸ˜¬":1===i?"ðŸ˜":2===i?"ðŸ¤”":"ðŸ’ª"}),(0,t.jsx)("span",{className:"text-white",children:e})]})},i))})]}),"goal"===m&&(0,t.jsxs)("div",{className:"animate-in slide-in-from-right-8 duration-500",children:[(0,t.jsx)("div",{className:"text-center mb-8",children:(0,t.jsx)(h.OnboardingMascot,{expression:"encouraging",size:"md",animate:!0})}),(0,t.jsx)("h3",{className:"font-mono text-xl md:text-2xl text-white font-bold mb-2 text-center",children:J.futurePrompt||V[c%V.length].title}),(0,t.jsx)("p",{className:"font-mono text-sm text-white/40 mb-8 text-center",children:V[c%V.length].subtitle}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("textarea",{value:ei,onChange:e=>n({...s,[et]:e.target.value}),placeholder:"Be specific. What do you see? How do you feel?",className:"w-full h-32 bg-transparent border-2 border-white/20 p-4 font-mono text-lg text-white placeholder-white/30 focus:outline-none focus:border-[#F97316] resize-none"})}),(0,t.jsx)(a.Button,{className:"mt-6 w-full",variant:"accent",onClick:()=>{l.playTick(),el(ei)},disabled:x||!ei.trim(),children:"Lock it in"})]}),"future"===m&&(0,t.jsxs)("div",{className:"animate-in slide-in-from-right-8 duration-500",children:[(0,t.jsx)("div",{className:"text-center mb-6",children:(0,t.jsx)("div",{className:"inline-block p-4 border-2 border-[#F97316]",children:(0,t.jsx)("span",{className:"text-4xl",children:J.icon})})}),(0,t.jsx)("h3",{className:"font-mono text-xl md:text-2xl text-white font-bold mb-2 text-center",children:q[c%q.length].title}),(0,t.jsx)("p",{className:"font-mono text-sm text-white/40 mb-6 text-center",children:q[c%q.length].subtitle}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 font-mono text-2xl text-[#F97316] font-bold",children:"I am"}),(0,t.jsx)("input",{type:"text",value:ei,onChange:e=>n({...s,[et]:e.target.value}),placeholder:"someone who...",className:"w-full bg-transparent border-b-4 border-white/20 py-4 pl-20 font-mono text-xl text-white placeholder-white/30 focus:outline-none focus:border-[#F97316]"})]}),(0,t.jsx)("p",{className:"font-mono text-xs text-white/30 mt-4 text-center",children:'e.g., "someone who shows up to the gym no matter what"'}),(0,t.jsx)(a.Button,{className:"mt-8 w-full",variant:"accent",onClick:()=>{l.playTick(),el(ei)},disabled:x||!ei.trim(),children:c===e.length-1?"Complete":"Next Pillar â†’"})]}),(0,t.jsx)("div",{className:"mt-12 flex justify-center gap-1",children:e.map((e,i)=>{let s=O(e),a=i<c,l=i===c;return(0,t.jsx)("div",{className:`w-8 h-8 flex items-center justify-center text-sm transition-all ${a?"bg-[#F97316] text-black":l?"border-2 border-[#F97316] text-white":"bg-white/10 text-white/30"}`,title:s.label,children:s.icon},e)})})]})};var D=e.i(66643);let Y=({data:e,onComplete:s})=>{let{signInWithGoogle:a,signInWithApple:l,signInWithPassword:n,isAuthenticated:r}=(0,D.useAuth)(),[o,c]=(0,i.useState)(null),[d,m]=(0,i.useState)(null),[u,x]=(0,i.useState)(""),[h,p]=(0,i.useState)(""),f=e?.name||e?.[4]||"there";i.default.useEffect(()=>{r&&s()},[r,s]);let g=async()=>{c("google"),m(null);try{(await a("/checkout/welcome")).error&&(m("Failed to sign in with Google. Please try again."),c(null))}catch{m("Something went wrong. Please try again."),c(null)}},b=async()=>{c("apple"),m(null);try{(await l("/checkout/welcome")).error&&(m("Failed to sign in with Apple. Please try again."),c(null))}catch{m("Something went wrong. Please try again."),c(null)}},w=async e=>{if(e.preventDefault(),!u||!h)return void m("Please enter both email and password");c("email"),m(null);try{let e=await n(u,h);e.error&&(m(e.error.message||"Failed to sign in. Please try again."),c(null))}catch{m("Something went wrong. Please try again."),c(null)}};return(0,t.jsxs)("div",{className:"w-full max-w-md mx-auto animate-in slide-in-from-bottom-8 duration-500",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsxs)("h2",{className:"font-mono text-2xl md:text-3xl font-bold mb-4 text-white",children:["Lock it in, ",f,"."]}),(0,t.jsx)("p",{className:"font-mono text-white/50",children:"Create your account to save your commitment"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("button",{onClick:g,disabled:null!==o,className:`w-full p-4 border-2 border-white/10 bg-white/5 
                     hover:border-white/30 hover:bg-white/10 
                     transition-all duration-200 
                     flex items-center justify-center gap-3
                     disabled:opacity-50 disabled:cursor-not-allowed
                     group`,children:"google"===o?(0,t.jsx)("div",{className:"w-6 h-6 border-2 border-t-[#F97316] border-white/20 rounded-full animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",className:"text-[#4285F4] group-hover:text-[#F97316]"}),(0,t.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",className:"text-[#34A853] group-hover:text-[#F97316]"}),(0,t.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",className:"text-[#FBBC05] group-hover:text-[#F97316]"}),(0,t.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",className:"text-[#EA4335] group-hover:text-[#F97316]"})]}),(0,t.jsx)("span",{className:"font-mono font-bold text-white group-hover:text-[#F97316] transition-colors",children:"Continue with Google"})]})}),(0,t.jsx)("button",{onClick:b,disabled:null!==o,className:`w-full p-4 border-2 border-white/10 bg-white/5 
                     hover:border-white/30 hover:bg-white/10 
                     transition-all duration-200 
                     flex items-center justify-center gap-3
                     disabled:opacity-50 disabled:cursor-not-allowed
                     group`,children:"apple"===o?(0,t.jsx)("div",{className:"w-6 h-6 border-2 border-t-[#F97316] border-white/20 rounded-full animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-6 h-6 text-white group-hover:text-[#F97316] transition-colors",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.53 4.09zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"})}),(0,t.jsx)("span",{className:"font-mono font-bold text-white group-hover:text-[#F97316] transition-colors",children:"Continue with Apple"})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-4 my-4",children:[(0,t.jsx)("div",{className:"flex-1 h-px bg-white/10"}),(0,t.jsx)("span",{className:"text-xs text-white/40 uppercase tracking-wide font-mono",children:"or for testing"}),(0,t.jsx)("div",{className:"flex-1 h-px bg-white/10"})]}),(0,t.jsxs)("form",{onSubmit:w,className:"space-y-3",children:[(0,t.jsx)("input",{type:"email",placeholder:"Email",value:u,onChange:e=>x(e.target.value),disabled:null!==o,className:"w-full p-4 border-2 border-white/10 bg-white/5 text-white font-mono placeholder:text-white/40 focus:outline-none focus:border-[#F97316] transition-colors disabled:opacity-50"}),(0,t.jsx)("input",{type:"password",placeholder:"Password",value:h,onChange:e=>p(e.target.value),disabled:null!==o,className:"w-full p-4 border-2 border-white/10 bg-white/5 text-white font-mono placeholder:text-white/40 focus:outline-none focus:border-[#F97316] transition-colors disabled:opacity-50"}),(0,t.jsx)("button",{type:"submit",disabled:null!==o,className:"w-full p-4 bg-[#F97316] text-black font-mono font-bold hover:bg-[#FB923C] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"email"===o?(0,t.jsx)("div",{className:"w-6 h-6 border-2 border-t-black border-black/20 rounded-full animate-spin mx-auto"}):"Sign in with Email"})]})]}),d&&(0,t.jsx)("div",{className:"mt-6 p-4 border-2 border-red-500",children:(0,t.jsx)("p",{className:"font-mono text-sm text-red-400 text-center",children:d})}),(0,t.jsx)("p",{className:"text-center text-xs text-white/30 mt-8 font-mono",children:"By continuing, you agree to our Terms of Service and Privacy Policy"}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-4",children:[(0,t.jsx)("svg",{className:"w-4 h-4 text-white/30",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,t.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),(0,t.jsx)("span",{className:"text-xs text-white/30 font-mono",children:"Secured by Supabase"})]})]})};function G({onFinish:e}){let s,d,x,[g,y]=(0,i.useState)(0),[j,v]=(0,i.useState)({}),[N,k]=(0,i.useState)(!1),[F,T]=(0,i.useState)(!0),[_,C]=(0,i.useState)(null),[M,P]=(0,i.useState)(!1),[L,$]=(0,i.useState)(!1),[E,B]=(0,i.useState)(!1),[V,q]=(0,i.useState)(!1),[z,O]=(0,i.useState)(!1),[D,G]=(0,i.useState)(0),[H,U]=(0,i.useState)(null),K=(0,i.useRef)(!1),X=(0,i.useRef)(Date.now());(0,i.useEffect)(()=>{let e=n.storageService.getData();e&&v(e),$(!0),l.init(),K.current||(o.analytics.onboardingStarted(),X.current=Date.now(),K.current=!0)},[]),(0,i.useEffect)(()=>{let e=()=>{l.init(),document.removeEventListener("click",e),document.removeEventListener("touchstart",e),document.removeEventListener("keydown",e)};return document.addEventListener("click",e),document.addEventListener("touchstart",e),document.addEventListener("keydown",e),()=>{document.removeEventListener("click",e),document.removeEventListener("touchstart",e),document.removeEventListener("keydown",e)}},[]);let Q=(0,i.useMemo)(()=>{let e,t;return[...(e=c.findIndex(e=>"pillar_questions"===e.type),c.slice(0,e)),{id:"pillar_questions",type:"pillar_questions"},...(t=c.findIndex(e=>"pillar_questions"===e.type),c.slice(t+1))]},[]),J=(0,i.useMemo)(()=>E&&!V?{id:"pillar_questions",type:"pillar_questions"}:Q[g],[g,Q,E,V]),Z=3*(Array.isArray(j.selected_pillars)?j.selected_pillars:[]).length,ee=Q.length+Z-1,et=(0,i.useMemo)(()=>E?Math.round((Q.findIndex(e=>"pillar_questions"===e.type)+1)/ee*100):Math.round((g+1)/ee*100),[g,ee,E,Q]);(0,i.useEffect)(()=>()=>{H&&clearInterval(H)},[H]),(0,i.useEffect)(()=>{n.storageService.saveData(j)},[j]);let ei=(0,i.useCallback)(t=>{if(!N){if(C(null),k(!0),T(!1),l.playBinauralBurst(),J&&o.analytics.onboardingStepCompleted(J.id,J.type,g,ee),void 0!==t&&J){let e=m(J.id);v({...j,[e]:t})}setTimeout(()=>{if(J?.type==="pillar_selection")y(e=>e+1);else if(J?.type==="pillar_primary")B(!0),q(!1);else if(E&&V)y(Q.findIndex(e=>"pillar_questions"===e.type)+1),B(!1),q(!1);else if(g<Q.length-1){let e=g+1;Q[e]?.type==="pillar_questions"?y(e+1):y(e)}else{P(!1),e();return}setTimeout(()=>{T(!0),k(!1),P(!1)},100)},600)}},[N,j,J,g,Q,E,V,e]),es=D>=15,ea=(0,i.useMemo)(()=>{if(!J)return"neutral";let e=(0,h.getExpressionForContent)(J.id);return e||(0,h.getExpressionForStep)(J.type,z)},[J,z]);return J?(0,t.jsxs)("div",{className:"fixed inset-0 bg-[#0A0A0A] text-[#FAFAFA] font-sans flex flex-col z-[100]",children:[M&&(0,t.jsx)(r.SavingOverlay,{message:"Saving..."}),(0,t.jsx)(u.GrainOverlay,{}),(0,t.jsx)("div",{className:"relative z-10 px-6 md:px-8 py-4 md:py-6 flex justify-between items-center bg-[#0A0A0A]/90 backdrop-blur-md border-b border-white/10",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,t.jsx)(h.OnboardingMascot,{expression:ea,size:"sm",speaking:J?.type==="commentary",animate:!0}),(0,t.jsx)("div",{className:"h-1 md:h-1.5 w-20 md:w-28 bg-white/10 overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-[#F97316] transition-all duration-500 ease-out",style:{width:L?`${Math.min(et,100)}%`:"0%"}})}),(0,t.jsx)("span",{className:"font-mono text-xs text-white/40",suppressHydrationWarning:!0,children:E?"Pillars":`${g+1}/${Q.length}`})]})}),(0,t.jsx)("div",{className:`relative z-10 flex-grow overflow-y-auto flex flex-col items-center px-4 md:px-6 max-w-5xl mx-auto w-full transition-all duration-500 ${F?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:(0,t.jsxs)("div",{className:"flex-grow flex flex-col items-center justify-center w-full py-6 md:py-8",children:["commentary"===J.type&&(0,t.jsx)(p,{lines:J.dynamicLines?J.dynamicLines(j):J.lines||[],onNext:()=>ei(),showMascot:!1},J.id),"input"===J.type&&(0,t.jsxs)("div",{className:"w-full flex flex-col items-center text-center",children:[(0,t.jsx)("h2",{className:"font-mono text-[#FAFAFA] text-xl md:text-2xl lg:text-3xl leading-relaxed font-medium mb-8 md:mb-12 px-4",children:J.label}),(0,t.jsx)(f,{placeholder:J.placeholder,value:j[m(J.id)]||"",onChange:e=>v({...j,[m(J.id)]:e}),onEnter:()=>!N&&j[m(J.id)]&&ei(j[m(J.id)])}),_&&(0,t.jsx)("p",{className:"mt-4 text-sm text-[#F97316]",children:_}),(0,t.jsx)(a.Button,{className:"mt-12 md:mt-16 w-full max-w-xs",variant:"accent",onClick:()=>ei(j[m(J.id)]),disabled:N||!j[m(J.id)],children:N?"Processing...":"Continue"})]},J.id),"choice"===J.type&&J.choices&&(0,t.jsxs)("div",{className:"w-full flex flex-col items-center text-center",children:[(0,t.jsx)("h2",{className:"font-mono text-[#FAFAFA] text-xl md:text-2xl lg:text-3xl leading-relaxed font-medium mb-8 md:mb-12 px-4",children:J.label}),(0,t.jsx)(b,{options:J.choices,onSelect:e=>ei(e),disabled:N})]},J.id),"slider"===J.type&&(0,t.jsxs)("div",{className:"w-full flex flex-col items-center",children:[(0,t.jsx)(w,{min:J.min||1,max:J.max||10,value:j[m(J.id)]??Math.floor(((J.min||1)+(J.max||10))/2),onChange:e=>v({...j,[m(J.id)]:e}),label:J.label}),(0,t.jsx)(a.Button,{className:"mt-16 md:mt-20 w-full max-w-xs",variant:"accent",onClick:()=>ei(j[m(J.id)]??Math.floor(((J.min||1)+(J.max||10))/2)),disabled:N,children:N?"Processing...":"Continue"})]},J.id),"voice"===J.type&&(0,t.jsxs)("div",{className:"text-center w-full flex flex-col items-center",children:[(0,t.jsx)("h2",{className:"font-mono text-[#FAFAFA] text-xl md:text-2xl lg:text-3xl leading-relaxed font-medium mb-4 px-4",children:J.label}),(0,t.jsx)("p",{className:"font-mono text-white/40 text-sm md:text-base mb-8 md:mb-12 px-4",children:J.subtext}),(0,t.jsx)(A,{isRecording:z,onToggle:()=>{if(z){if(D<15)return;H&&(clearInterval(H),U(null));let e=J?.id==="dark_future_voice"?"dark_future":J?.id==="why_voice"?"why":"pledge";o.analytics.onboardingVoiceRecorded(e,D),O(!1),G(0),ei("voice_recorded")}else O(!0),G(0),U(setInterval(()=>{G(e=>e+1)},1e3))},recordingTime:D,minDuration:15,canStop:es,fieldName:m(J.id)})]},J.id),"time"===J.type&&(0,t.jsxs)("div",{className:"w-full flex flex-col items-center text-center",children:[(0,t.jsx)("h2",{className:"font-mono text-[#FAFAFA] text-xl md:text-2xl lg:text-3xl leading-relaxed font-medium mb-8 md:mb-12 px-4",children:J.label}),(0,t.jsx)("input",{type:"time",value:j[m(J.id)]||"21:00",className:"w-full max-w-xs bg-transparent border-b-4 border-white/10 py-6 md:py-8 text-3xl md:text-4xl lg:text-5xl font-mono font-medium text-[#FAFAFA] focus:outline-none focus:border-[#F97316] tracking-tight text-center",onChange:e=>v({...j,[m(J.id)]:e.target.value})}),(0,t.jsx)(a.Button,{className:"mt-12 md:mt-16 w-full max-w-xs",variant:"accent",onClick:()=>ei(j[m(J.id)]||"21:00"),disabled:N,children:N?"Processing...":"Set Time"})]},J.id),"pillar_selection"===J.type&&(0,t.jsx)(R,{selected:Array.isArray(j.selected_pillars)?j.selected_pillars:[],onSelect:e=>{v(t=>({...t,selected_pillars:e}))},onContinue:()=>{let e=Array.isArray(j.selected_pillars)?j.selected_pillars:[];o.analytics.onboardingPillarsSelected(e,""),ei(e)}},J.id),"pillar_primary"===J.type&&(0,t.jsx)(I,{selectedPillars:Array.isArray(j.selected_pillars)?j.selected_pillars:[],onSelect:e=>{let t=Array.isArray(j.selected_pillars)?j.selected_pillars:[];o.analytics.onboardingPillarsSelected(t,e),v(t=>({...t,primary_pillar:e})),ei(e)}},J.id),"pillar_questions"===J.type&&E&&(s=Array.isArray(j.selected_pillars)?j.selected_pillars:[],x=(d=j.primary_pillar)?[d,...s.filter(e=>e!==d)]:s,(0,t.jsx)(W,{selectedPillars:x,data:j,onUpdate:e=>{v(t=>({...t,...e}))},onComplete:()=>{q(!0),setTimeout(()=>{k(!0),T(!1),setTimeout(()=>{y(Q.findIndex(e=>"pillar_questions"===e.type)+1),B(!1),q(!1),setTimeout(()=>{T(!0),k(!1)},100)},600)},100)}},"pillar_questions")),"card"===J.type&&(0,t.jsx)(S,{data:j,onAccept:()=>ei()},J.id),"auth"===J.type&&(0,t.jsx)(Y,{data:j,onComplete:()=>{let t=Math.round((Date.now()-X.current)/1e3);o.analytics.onboardingCompleted(ee,t),e()}},J.id)]})})]}):(0,t.jsx)("div",{className:"fixed inset-0 bg-[#0A0A0A] flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-white font-mono",children:"Loading..."})})}var H=e.i(9186);function U(){let e=(0,s.useRouter)(),{isAuthenticated:a,loading:o}=(0,D.useAuth)(),{onboardingCompleted:c,isActive:m,loading:u}=(0,H.useSubscription)(),[x,h]=(0,i.useState)(!0),[p,f]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{l.init()},[]),(0,i.useEffect)(()=>{if(o)return;let t=n.storageService.getData();if(!(Object.values(d).filter(e=>{let i=t[e];return null==i||""===i}).length>0)&&1)return void e.replace("/setup");if(Object.keys(t).length,a){if(u)return;if(c)return void(m?e.replace("/dashboard"):e.replace("/checkout"))}h(!1),f(!0)},[o,u,a,c,m,e]),x||o||a&&u)?(0,t.jsx)(r.FullPageLoader,{message:"Loading..."}):p?(0,t.jsx)(G,{onFinish:()=>{e.push("/setup")}}):(0,t.jsx)(r.FullPageLoader,{message:"Redirecting..."})}e.s(["default",()=>U],66606)}]);